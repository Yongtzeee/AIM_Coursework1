import random
import numpy as np

import matplotlib.pyplot as plt
import matplotlib.mlab as mlab
import statistics

from scipy import stats

# --- cw1
# # box plotting
# original_results = [72.7000, 74.8100, 69.0400, 69.5000, 54.7900, 73.1500, 74., 9.5800, 74.2900, 72., 9.7400, 63.6500, 72.0200, 73.4300, 70.5900, 69.9400, 9.7400, 72.3100, 72.8400, 22.8600, 46.5500, 71.9500, 64.6500, 30.3900, 72.0500, 75.4700, 76.2100, 74.6500, 9.7400, 73.6900, 45.2000, 66.9600, 68.0800, 74.6200, 56.6600, 73.4900, 76.7700, 73.9900, 27.9900, 62.8900, 9.7400, 76.3700, 9.7400, 35.5100, 9.7400, 69.4800, 66.0200, 71.7000, 71.9800, 22.9100, 71.6200, 72.1700, 60.7000, 72.3500, 72.9200, 75.5800, 66.7300, 70.2900, 36.7000, 72.7600, 71.2600, 71.9500, 71.2200, 74.5500, 64.7000, 70.6800, 67.0600, 75.3300, 59.9300, 50.0700, 73.9000, 23.9100, 10.2800, 73.8000, 13.0100, 9.7400, 28.5900, 74.1600, 9.7400, 73.6500, 60.7200, 48.5400, 74.6600, 16.8500, 73.8900, 32.0400, 74.0900, 9.5800, 71.9800, 10.2800, 67.8200, 70.2900, 73.4300, 10.2800, 71.7900, 66.7300, 10.2800, 75.5700, 67.0200, 76.6500]
# # difference_vector / diff_lr
# modified_results = [75.27999877929688, 76.31999969482422, 73.5, 73.27999877929688, 73.7699966430664, 75.79000091552734, 74.73999786376953, 74.4000015258789, 75.5999984741211, 75.0999984741211, 74.73999786376953, 74.4800033569336, 74.51000213623047, 74.75, 75.45999908447266, 73.80999755859375, 74.27999877929688, 73.61000061035156, 74.3499984741211, 73.13999938964844, 74.38999938964844, 74.55000305175781, 74.61000061035156, 74.9800033569336, 73.68000030517578, 76.02999877929688, 74.56999969482422, 74.86000061035156, 74.9800033569336, 73.66999816894531, 74.26000213623047, 76.77999877929688, 72.51000213623047, 72.7699966430664, 73.04000091552734, 73.91000366210938, 74.23999786376953, 75.76000213623047, 75.01000213623047, 75.18000030517578, 75.16999816894531, 75.58999633789062, 74.19000244140625, 73.0199966430664, 73.7300033569336, 75.12999725341797, 73.2300033569336, 73.41000366210938, 75.55000305175781, 74.30999755859375, 74.83000183105469, 73.52999877929688, 74.16000366210938, 74.25, 74.77999877929688, 74.5999984741211, 74.83000183105469, 75.0999984741211, 74.5999984741211, 75.08000183105469, 73.80999755859375, 49.06999969482422, 74.79000091552734, 75.52999877929688, 75.33999633789062, 75.43000030517578, 75.13999938964844, 74.29000091552734, 73.3499984741211, 74.83999633789062, 75.08000183105469, 75.33999633789062, 74.31999969482422, 75.2300033569336, 75.04000091552734, 73.73999786376953, 75.4800033569336, 75.88999938964844, 76.01000213623047, 73.94999694824219, 73.6500015258789, 75.98999786376953, 74.87999725341797, 75.37000274658203, 75.37000274658203, 75.0999984741211, 75.33000183105469, 73.69000244140625, 73.66999816894531, 73.9000015258789, 75.08000183105469, 76.16000366210938, 73.69000244140625, 75.06999969482422, 75.18000030517578, 72.37000274658203, 74.80999755859375, 73.88999938964844, 72.91000366210938, 76.80999755859375]
# # diff_lr / difference_vector
# modified_results = [75.25, 73.19000244140625, 75.01000213623047, 74.54000091552734, 75.58000183105469, 73.0199966430664, 73.86000061035156, 74.95999908447266, 75.56999969482422, 73.68000030517578, 73.77999877929688, 73.62999725341797, 73.05999755859375, 72.37999725341797, 76.47000122070312, 74.9800033569336, 74.54000091552734, 74.7699966430664, 74.77999877929688, 76.4800033569336, 75.25, 73.19000244140625, 75.01000213623047, 74.54000091552734, 75.58000183105469, 73.0199966430664, 73.86000061035156, 74.95999908447266, 75.56999969482422, 73.68000030517578, 73.77999877929688, 73.62999725341797, 73.05999755859375, 72.37999725341797, 76.47000122070312, 74.9800033569336, 74.54000091552734, 74.7699966430664, 74.77999877929688, 76.4800033569336, 75.25, 73.19000244140625, 75.01000213623047, 74.54000091552734, 75.58000183105469, 73.0199966430664, 73.86000061035156, 74.95999908447266, 75.56999969482422, 73.68000030517578, 73.77999877929688, 73.62999725341797, 73.05999755859375, 72.37999725341797, 76.47000122070312, 74.9800033569336, 74.54000091552734, 74.7699966430664, 74.77999877929688, 76.4800033569336, 75.25, 73.19000244140625, 75.01000213623047, 74.54000091552734, 75.58000183105469, 73.0199966430664, 73.86000061035156, 74.95999908447266, 75.56999969482422, 73.68000030517578, 73.77999877929688, 73.62999725341797, 73.05999755859375, 72.37999725341797, 76.47000122070312, 74.9800033569336, 74.54000091552734, 74.7699966430664, 74.77999877929688, 76.4800033569336, 75.25, 73.19000244140625, 75.01000213623047, 74.54000091552734, 75.58000183105469, 73.0199966430664, 73.86000061035156, 74.95999908447266, 75.56999969482422, 73.68000030517578, 73.77999877929688, 73.62999725341797, 73.05999755859375, 72.37999725341797, 76.47000122070312, 74.9800033569336, 74.54000091552734, 74.7699966430664, 74.77999877929688, 76.4800033569336]

# --- cw2
# # accuracy
# # cw1
# original_results = [70.2699966430664, 74.5199966430664, 74.7699966430664, 76.41999816894531, 74.4000015258789, 74.04000091552734, 65.88999938964844, 76.33000183105469, 75.16999816894531, 68.5999984741211, 75.45999908447266, 76.0199966430664, 72.87999725341797, 75.8499984741211, 69.05999755859375, 69.86000061035156, 67.91999816894531, 75.9000015258789, 76.5199966430664, 69.08000183105469, 75.16999816894531, 73.01000213623047, 74.2699966430664, 69.87999725341797, 76.25, 69.23999786376953, 74.0, 62.0099983215332, 75.95999908447266, 76.13999938964844, 71.11000061035156, 73.5, 72.18000030517578, 75.80000305175781, 75.83000183105469, 71.51000213623047, 69.48999786376953, 75.77999877929688, 67.93000030517578, 76.01000213623047, 68.02999877929688, 73.69999694824219, 75.4000015258789, 71.33000183105469, 71.43000030517578, 71.02999877929688, 74.91000366210938, 76.80999755859375, 70.36000061035156, 76.11000061035156, 75.26000213623047, 75.51000213623047, 74.16999816894531, 73.7699966430664, 76.25, 75.2300033569336, 70.83000183105469, 72.66000366210938, 74.86000061035156, 51.86000061035156, 71.11000061035156, 69.19000244140625, 76.51000213623047, 75.18000030517578, 76.05000305175781, 76.01000213623047, 72.9800033569336, 76.36000061035156, 66.45999908447266, 76.43000030517578, 76.5199966430664, 68.51000213623047, 76.31999969482422, 75.62000274658203, 75.5199966430664, 76.06999969482422, 72.13999938964844, 75.62000274658203, 74.73999786376953, 71.94000244140625, 74.5199966430664, 70.91000366210938, 75.19999694824219, 77.04000091552734, 75.1500015258789, 70.58999633789062, 76.93000030517578, 73.80999755859375, 72.27999877929688, 74.31999969482422, 73.61000061035156, 71.5999984741211, 58.86000061035156, 69.12999725341797, 67.72000122070312, 61.72999954223633, 73.33999633789062, 75.29000091552734, 75.0999984741211, 61.959999084472656]
# # cw2
# modified_results = [75.45999908447266, 75.4000015258789, 76.01000213623047, 74.75, 76.70999908447266, 76.0999984741211, 76.69000244140625, 75.66000366210938, 74.33000183105469, 76.6500015258789, 75.36000061035156, 76.20999908447266, 76.26000213623047, 76.0, 75.27999877929688, 77.16999816894531, 76.81999969482422, 75.22000122070312, 76.33000183105469, 74.95999908447266, 76.05999755859375, 70.72000122070312, 75.9800033569336, 76.41999816894531, 74.52999877929688, 77.31999969482422, 77.48999786376953, 76.4800033569336, 76.41999816894531, 70.4800033569336, 75.66999816894531, 76.41000366210938, 75.70999908447266, 75.69000244140625, 74.0, 77.2699966430664, 77.48999786376953, 77.08999633789062, 73.77999877929688, 76.05000305175781, 74.87000274658203, 74.93000030517578, 75.3499984741211, 76.4800033569336, 76.94999694824219, 75.13999938964844, 75.3499984741211, 76.70999908447266, 75.58000183105469, 75.68000030517578, 77.72000122070312, 76.62999725341797, 77.61000061035156, 73.36000061035156, 76.20999908447266, 73.30999755859375, 77.66999816894531, 72.93000030517578, 74.6500015258789, 77.04000091552734, 75.45999908447266, 76.47000122070312, 77.55999755859375, 74.83999633789062, 76.06999969482422, 75.0, 76.16000366210938, 75.83000183105469, 75.81999969482422, 76.95999908447266, 76.0, 75.97000122070312, 76.36000061035156, 76.33000183105469, 76.37999725341797, 77.08000183105469, 75.94000244140625, 69.58000183105469, 75.45999908447266, 71.9000015258789, 73.9800033569336, 74.11000061035156, 74.97000122070312, 75.9000015258789, 76.75, 76.01000213623047, 75.87999725341797, 75.9800033569336, 75.80000305175781, 76.33000183105469, 73.63999938964844, 75.44999694824219, 75.55000305175781, 74.68000030517578, 75.7699966430664, 75.43000030517578, 75.7699966430664, 75.41000366210938, 76.69999694824219, 75.97000122070312]

# loss
# cw1
original_results = [1.6005650758743286, 1.2030922174453735, 0.924650251865387, 0.9327147006988525, 0.8580003976821899, 1.1947616338729858, 5.149449348449707, 0.8133319616317749, 0.7800536155700684, 1.500164270401001, 0.8849036693572998, 1.0276973247528076, 78.42919921875, 1.016404628753662, 31.06435203552246, 148647.640625, 67.23914337158203, 1.0203843116760254, 1.105307698249817, 1.0830541849136353, 0.7959650158882141, 4475.61865234375, 1.3700960874557495, 3.3018527030944824, 1.146385669708252, 1.1839536428451538, 1.2500063180923462, 4.460141181945801, 1.0156701803207397, 0.806694746017456, 2004323.25, 1.214988350868225, 691.7802734375, 0.9096227288246155, 0.8438961505889893, 1.4092024564743042, 4.435683727264404, 0.780398428440094, 1.5969533920288086, 1.1038813591003418, 708.3141479492188, 1.092491865158081, 0.9531576633453369, 5.026296615600586, 75.41847229003906, 2.6678218841552734, 0.8087038397789001, 0.7777413129806519, 130.55184936523438, 0.7738820910453796, 0.8612085580825806, 0.940451443195343, 0.8836588859558105, 1.3178199529647827, 0.7509704232215881, 0.8063417077064514, 2.278329849243164, 59.7841796875, 1.0489273071289062, 97.42247009277344, 4.742668628692627, 2.9951119422912598, 0.7511284351348877, 0.8632745742797852, 0.8083552718162537, 0.7506461143493652, 0.9199179410934448, 0.9986863732337952, 59936.34375, 1.1250685453414917, 0.9403641223907471, 97.25193786621094, 0.7530079483985901, 0.8952357172966003, 0.931689441204071, 0.7619336843490601, 194.86392211914062, 0.904133677482605, 0.8191431164741516, 0.8807999491691589, 1.4639928340911865, 4029.0595703125, 1.3194975852966309, 0.7548052668571472, 1.3007067441940308, 28.88088607788086, 0.7406665086746216, 0.8961301445960999, 2.1512649059295654, 2.1906578540802, 1.0494662523269653, 5.826453685760498, 2.2020225524902344, 5.801945209503174, 3.472912073135376, 2.761884927749634, 239.70794677734375, 0.8481442928314209, 1.1271822452545166, 1.8374055624008179]
# cw2
modified_results = [0.7854036688804626, 0.958424985408783, 0.7562034130096436, 1.0764102935791016, 1.1453053951263428, 0.8518074750900269, 0.8403915762901306, 1.0195355415344238, 1.3003772497177124, 1.1421563625335693, 3.6142799854278564, 0.764599621295929, 1.0683573484420776, 0.9325645565986633, 0.9203129410743713, 0.7530750632286072, 0.9660762548446655, 0.9893540740013123, 0.943545401096344, 1.0877282619476318, 0.9730607867240906, 3.4001777172088623, 1.0694339275360107, 1.301951289176941, 1.8500025272369385, 0.7427861094474792, 1.5823791027069092, 0.7301143407821655, 0.7411611080169678, 3.285318374633789, 0.782585620880127, 0.8730438947677612, 1.2923543453216553, 0.7623058557510376, 1.46756911277771, 1.2380090951919556, 0.7584075927734375, 0.7044510245323181, 1.005505084991455, 0.7886255979537964, 0.7877657413482666, 1.0731979608535767, 1.0234280824661255, 0.8594492673873901, 1.181223750114441, 1.2295624017715454, 1.256632685661316, 0.8630423545837402, 0.874971866607666, 1.3473275899887085, 0.725657045841217, 0.735044002532959, 0.6914929747581482, 1.1632977724075317, 0.9024196267127991, 3.3370285034179688, 0.7094219923019409, 2.235257863998413, 0.785027801990509, 0.7597779035568237, 1.091883897781372, 0.753943145275116, 0.6903948783874512, 0.800153374671936, 0.8886048793792725, 1.182173252105713, 0.7421494126319885, 1.0757120847702026, 0.9413368701934814, 0.9264038801193237, 0.8175312876701355, 0.8181678056716919, 0.7813031673431396, 1.111161231994629, 1.028415322303772, 0.770258367061615, 0.8832763433456421, 1.074492335319519, 0.8484331965446472, 2.4996566772460938, 1.1617436408996582, 1.4545836448669434, 1.4040005207061768, 0.7783485054969788, 0.8574324250221252, 0.7888998985290527, 0.8490074276924133, 0.8457764387130737, 1.2225677967071533, 0.8495842814445496, 0.8310995101928711, 0.9635589718818665, 0.9400938153266907, 1.5241936445236206, 0.9558495879173279, 0.834290087223053, 0.8703253865242004, 1.107913613319397, 1.1762396097183228, 0.7710656523704529]


data = [original_results, modified_results]

print("Original condition:")
print("Mean accuracy:         {}".format(np.mean(original_results)))
print("Standard deviation:    {}".format(np.std(original_results)))
print("Minimum accuracy:      {}".format(min(original_results)))
print("1st Quartile accuracy: {}".format(np.percentile(original_results, 25)))
print("Median accuracy:       {}".format(np.percentile(original_results, 50)))
print("3rd Quartile accuracy: {}".format(np.percentile(original_results, 75)))
print("Maximum accuracy:      {}".format(max(original_results)))
print("Interquartile range:   {}".format(np.percentile(original_results, 75) - np.percentile(original_results, 25)))

print("\nModified condition:")
print("Mean accuracy:         {}".format(np.mean(modified_results)))
print("Standard deviation:    {}".format(np.std(modified_results)))
print("Minimum accuracy:      {}".format(min(modified_results)))
print("1st Quartile accuracy: {}".format(np.percentile(modified_results, 25)))
print("Median accuracy:       {}".format(np.percentile(modified_results, 50)))
print("3rd Quartile accuracy: {}".format(np.percentile(modified_results, 75)))
print("Maximum accuracy:      {}".format(max(modified_results)))
print("Interquartile range:   {}".format(np.percentile(modified_results, 75) - np.percentile(modified_results, 25)))

print("\nWilcoxon rank sum test result:")
z_value, p_value = stats.ranksums(original_results, modified_results)
print("z-statistics: {}".format(z_value))
print("p-value: {}".format(p_value))

print("\nMann-Whitney U test result:")
statistics, p_value = stats.mannwhitneyu(original_results, modified_results)
print("statistics: {}".format(statistics))
print("p-value: {}".format(p_value))

# print("\nt-test result:")
# t_statistics, p_value = stats.ttest_ind(original_results, modified_results, equal_var=False)
# print("t-statistics: {}".format(t_statistics))
# print("p-value: {}".format(p_value))

fig, ax = plt.subplots()
bp = ax.boxplot(data)
ax.set_title("Result of both conditions after 100 trials")
# plt.ylim(0, 100)
plt.xlabel("Conditions (1 is coursework 1, 2 is coursework 2)")
# plt.ylabel("Validation accuracy (%, higher is better)") # used only for comparing validation accuracy
plt.ylabel("Validation loss (lower is better)") # used only for comparing validation loss
# for element in ['boxes', 'whiskers', 'fliers', 'means', 'medians', 'caps']:
#   plt.setp(bp[element], color='red')
# plt.setp(bp['whiskers'], color='red')
# plt.setp(bp['caps'], color='red')
plt.setp(bp['medians'], color='red')

plt.show()